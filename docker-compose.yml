version: '3.8'

services:
  uploader:
    # 构建配置
    build:
      # 构建上下文
      context: .
      # 使用当前目录的 Dockerfile
      dockerfile: Dockerfile
    # 镜像名称
    image: emos-uploader
    # 容器名称
    container_name: emos-uploader
    # 端口映射
    ports:
      - "8000:3000"
    # 重启策略
    restart: unless-stopped
    # 环境变量
    environment:
      - NODE_ENV=production
      - VITE_API_BASE_URL=https://your-api-endpoint.com
    # 可选：挂载环境变量文件
    # env_file:
    #   - .env.production

# 使用说明：
# 1. 构建并运行服务：docker-compose up -d
# 2. 停止并移除服务：docker-compose down
# 3. 查看服务状态：docker-compose ps
# 4. 查看服务日志：docker-compose logs -f

# 注意：使用 docker-compose up -d 命令会自动构建镜像（如果需要）并运行容器，
# 无需手动执行 docker build 命令